<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Buy Block - The Million Dollar Homepage 2.0</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        body { background: #0B0E11; color: #fff; font-family: sans-serif; text-align: center; padding: 50px; }
        .box { background: #1E2329; border: 2px solid #FCD535; padding: 40px; border-radius: 15px; display: inline-block; width: 400px; text-align: left; }
        input { width: 95%; padding: 15px; margin: 10px 0; border-radius: 5px; border: 1px solid #444; background: #0B0E11; color: #fff; font-size: 16px; }
        .price-info { color: #FCD535; font-size: 22px; font-weight: bold; margin: 20px 0; text-align: center; }
        button { width: 100%; padding: 15px; background: #FCD535; color: #000; border: none; font-weight: bold; cursor: pointer; font-size: 18px; border-radius: 5px; }
        .back-btn { display: block; margin-top: 20px; color: #848e9c; text-decoration: none; text-align: center; }
        #popup { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: #fff; color: #000; padding: 30px; border: 3px solid #FCD535; width: 350px; box-shadow: 0 0 30px rgba(0,0,0,0.5); text-align: center; z-index: 999; }
    </style>
</head>
<body>
    <div class="box" id="order-form">
        <h2 style="color:#FCD535; text-align:center;">BUY BLOCKS</h2>
        <label>Brand Name:</label>
        <input type="text" id="brand" placeholder="Enter Brand Name">
        <label>Number of Blocks (Min 100):</label>
        <input type="number" id="qty" value="100" min="100" oninput="calc()">
        <div class="price-info">Total: $<span id="tot">500</span></div>
        <button onclick="submitRequest()">SUBMIT REQUEST</button>
        <a href="index.html" class="back-btn">← Back to Canvas</a>
    </div>

    <div id="popup">
        <h2 id="greet">Congratulations!</h2>
        <p>Order submitted successfully.</p>
        <div style="text-align:left; font-size:13px; background:#f0f0f0; padding:10px; margin:15px 0;">
            <b>Support Requirements:</b><br>
            1. Payment Screenshot<br>
            2. Brand Logo (10x10 px)<br>
            3. Target Website Link
        </div>
        <button onclick="contactWA()" style="background:#25D366; color:white; border:none; padding:10px; cursor:pointer;">Go to WhatsApp</button>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDJbVCF0AkLkCiCwFBc1Ki5PrKxFeYt8_E",
            databaseURL: "https://milliondollarhomepage2-71ba3-default-rtdb.firebaseio.com"
        };
        firebase.initializeApp(firebaseConfig);

        function calc() { document.getElementById('tot').innerText = document.getElementById('qty').value * 5; }
        
        function submitRequest() {
            let b = document.getElementById('brand').value, q = document.getElementById('qty').value;
            if(!b || q < 100) return alert("Fill Name and Min 100 blocks!");
            
            // Firebase-এ অর্ডার সেভ করা
            firebase.database().ref('orders/' + Date.now()).set({name: b, blocks: q})
            .then(() => {
                confetti();
                document.getElementById('greet').innerText = "Congratulations, " + b + "!";
                document.getElementById('order-form').style.opacity = "0.1";
                document.getElementById('popup').style.display = "block";
            });
        }

        function contactWA() {
            let b = document.getElementById('brand').value, q = document.getElementById('qty').value;
            let msg = encodeURIComponent(`Hello! I ordered pixels.\nBrand: ${b}\nBlocks: ${q}\nTotal: $${q*5}`);
            window.location.href = "https://wa.me/8801576940717?text=" + msg;
        }
    </script>
</body>
</html>
