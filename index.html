<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>THE MILLION DOLLAR HOMEPAGE 2.0</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>

    <style>
        :root { --gold: #FCD535; --black: #0B0E11; --dark: #1E2329; --ash: #848e9c; }
        
        body { margin: 0; background: #222; font-family: 'Segoe UI', sans-serif; overflow-x: hidden; touch-action: none; }
        
        /* Fixed Header Area */
        #header-area { background: #fff; padding: 20px 10px; border-bottom: 2px solid var(--black); position: relative; z-index: 100; text-align: center; }
        .stats-row { display: flex; justify-content: center; gap: 20px; font-weight: bold; font-size: 14px; color: #555; margin-bottom: 15px; }
        
        /* New Order Section (Moved Up) */
        .order-container { background: var(--dark); padding: 20px; border-radius: 10px; display: inline-block; width: 90%; max-width: 500px; color: #fff; margin-bottom: 20px; }
        .order-container input { width: 45%; padding: 10px; margin: 5px; border-radius: 5px; border: none; }
        .buy-btn { background: var(--gold); color: #000; padding: 10px 25px; border: none; font-weight: bold; cursor: pointer; border-radius: 5px; margin-top: 10px; width: 95%; }

        /* Payment Gateway Button */
        .pay-gate { position: relative; display: inline-block; margin: 10px; }
        .pay-trigger { background: var(--black); color: var(--gold); padding: 10px 20px; border: 2px solid var(--gold); border-radius: 5px; cursor: pointer; font-weight: bold; }
        .pay-menu { display: none; position: absolute; top: 100%; left: 50%; transform: translateX(-50%); background: #fff; border: 1px solid #ccc; box-shadow: 0 4px 15px rgba(0,0,0,0.3); width: 280px; border-radius: 8px; z-index: 1000; padding: 10px; }
        .pay-menu.active { display: block; }
        .pay-item { color: #333; font-size: 12px; padding: 10px; border-bottom: 1px solid #eee; cursor: pointer; word-break: break-all; text-align: left; }
        .pay-item:hover { background: #f9f9f9; }
        .pay-item b { color: #000; display: block; margin-bottom: 3px; }

        /* Canvas Mapping */
        #canvas-viewport { width: 100vw; height: 60vh; background: #888; overflow: hidden; position: relative; cursor: grab; }
        #canvas-container { position: absolute; transform-origin: 0 0; }
        canvas { background: #fff; display: block; image-rendering: pixelated; box-shadow: 0 0 20px rgba(0,0,0,0.5); }

        /* Social & Info */
        .info-portals { display: flex; flex-wrap: wrap; gap: 10px; padding: 20px; background: #f4f4f4; justify-content: center; }
        .portal-card { background: #fff; color: #333; padding: 15px; border-left: 4px solid var(--gold); width: 300px; text-align: left; font-size: 13px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        
        #tooltip { position: fixed; background: rgba(0,0,0,0.8); color: #fff; padding: 5px 10px; border-radius: 4px; font-size: 12px; display: none; pointer-events: none; z-index: 2000; }
        
        @media (max-width: 768px) {
            .order-container input { width: 90%; }
            #canvas-viewport { height: 50vh; }
        }
    </style>
</head>
<body>

<div id="header-area">
    <h1 style="margin:0 0 10px 0; font-size: 24px;">THE MILLION DOLLAR HOMEPAGE 2.0</h1>
    
    <div class="stats-row">
        <span>TOTAL: 1,000,000</span>
        <span style="color:red;">CLAIMED: <span id="sold-count">0</span></span>
    </div>

    <div class="order-container">
        <input type="text" id="brand-name" placeholder="Brand Name">
        <input type="number" id="plot-qty" value="20" min="20" placeholder="Qty">
        <div style="margin: 10px 0; font-size: 18px; color: var(--gold);">Total: $<span id="total-val">100</span></div>
        <button class="buy-btn" onclick="processOrder()">SUBMIT ACQUISITION</button>
    </div>

    <div>
        <div class="pay-gate">
            <button class="pay-trigger" onclick="togglePay()">PAYMENT GATEWAY <i class="fas fa-chevron-down"></i></button>
            <div class="pay-menu" id="payMenu">
                <div class="pay-item" onclick="copy('912221034')"><b>BINANCE ID (Tap to Copy)</b> 912221034</div>
                <div class="pay-item" onclick="copy('TTapBkTqrDnzHbWzek6wSBUTcJKFmR8Ws6')"><b>USDT TRC20 (Tap to Copy)</b> TTapBkTqrDnzHbWzek6wSBUTcJKFmR8Ws6</div>
                <div class="pay-item" onclick="copy('0x443792A4884e8e855f954ccEF910778Aff1eb78E')"><b>METAMASK (Tap to Copy)</b> 0x443792A4884e8e855f954ccEF910778Aff1eb78E</div>
            </div>
        </div>
        <a href="https://x.com/ARCHIVEKAWSAR" target="_blank" class="pay-trigger" style="text-decoration:none; background:#1DA1F2; border-color:#1DA1F2; color:white;">FOLLOW X</a>
    </div>
</div>

<div id="canvas-viewport">
    <div id="canvas-container">
        <canvas id="mainCanvas" width="5000" height="1000"></canvas>
    </div>
    <div id="tooltip"></div>
</div>

<div class="info-portals">
    <div class="portal-card">
        <h4 style="margin:0 0 10px 0; color:var(--black)">SUBMISSION PROTOCOL</h4>
        • Complete Payment<br>• Send Screenshot to Support<br>• Provide Logo (5x5 px scale)<br>• Sync Time: 2-4 Hours
    </div>
    <div class="portal-card">
        <h4 style="margin:0 0 10px 0; color:var(--black)">ELITE BENEFITS</h4>
        • Lifetime Digital Heritage<br>• Permanent SEO Backlink<br>• Global 4K Synchronization<br>• Zero Maintenance Fees
    </div>
</div>

<script>
    // Firebase Config
    const firebaseConfig = {
        apiKey: "AIzaSyDJbVCF0AkLkCiCwFBc1Ki5PrKxFeYt8_E",
        databaseURL: "https://milliondollarhomepage2-71ba3-default-rtdb.firebaseio.com",
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const cv = document.getElementById('mainCanvas'), ctx = cv.getContext('2d');
    const viewport = document.getElementById('canvas-viewport');
    const container = document.getElementById('canvas-container');
    const tooltip = document.getElementById('tooltip');

    let scale = 0.5, posX = 0, posY = 0;
    const blockSize = 5;

    // UI Logic
    function togglePay() { document.getElementById('payMenu').classList.toggle('active'); }
    function copy(t) { navigator.clipboard.writeText(t); alert("Copied!"); }
    document.getElementById('plot-qty').oninput = function() {
        if(this.value < 20) this.value = 20;
        document.getElementById('total-val').innerText = this.value * 5;
    };

    // Render Logic
    function render() {
        ctx.fillStyle = "#fff"; ctx.fillRect(0,0,5000,1000);
        db.ref('pixels').once('value', s => {
            const data = s.val() || {};
            document.getElementById('sold-count').innerText = Object.keys(data).length;
            Object.values(data).forEach(p => {
                const id = parseInt(p.plotID) - 1;
                const x = (id % 1000) * blockSize, y = Math.floor(id / 1000) * blockSize;
                let img = new Image(); img.src = p.imageUrl;
                img.onload = () => ctx.drawImage(img, x, y, blockSize, blockSize);
            });
        });
    }
    render();

    // Pan & Zoom System (Desktop + Mobile)
    let isDragging = false, startX, startY;
    viewport.addEventListener('mousedown', e => { isDragging = true; startX = e.clientX - posX; startY = e.clientY - posY; viewport.style.cursor = 'grabbing'; });
    window.addEventListener('mouseup', () => { isDragging = false; viewport.style.cursor = 'grab'; });
    window.addEventListener('mousemove', e => {
        if(!isDragging) return;
        posX = e.clientX - startX; posY = e.clientY - startY;
        updateTransform();
    });

    viewport.addEventListener('wheel', e => {
        e.preventDefault();
        const delta = e.deltaY > 0 ? 0.9 : 1.1;
        const newScale = scale * delta;
        if(newScale > 0.2 && newScale < 5) { // জুম লিমিট
            scale = newScale;
            updateTransform();
        }
    });

    // Touch support (Mobile Zoom/Pan)
    let initialDist = null;
    viewport.addEventListener('touchstart', e => {
        if(e.touches.length === 1) {
            isDragging = true; 
            startX = e.touches[0].clientX - posX; 
            startY = e.touches[0].clientY - posY;
        } else if(e.touches.length === 2) {
            initialDist = Math.hypot(e.touches[0].pageX - e.touches[1].pageX, e.touches[0].pageY - e.touches[1].pageY);
        }
    });
    viewport.addEventListener('touchmove', e => {
        if(e.touches.length === 1 && isDragging) {
            posX = e.touches[0].clientX - startX; 
            posY = e.touches[0].clientY - startY;
        } else if(e.touches.length === 2) {
            let dist = Math.hypot(e.touches[0].pageX - e.touches[1].pageX, e.touches[0].pageY - e.touches[1].pageY);
            let delta = dist / initialDist;
            let newScale = scale * delta;
            if(newScale > 0.2 && newScale < 5) scale = newScale;
            initialDist = dist;
        }
        updateTransform();
    });

    function updateTransform() {
        container.style.transform = `translate(${posX}px, ${posY}px) scale(${scale})`;
    }

    function processOrder() {
        const name = document.getElementById('brand-name').value;
        const qty = document.getElementById('plot-qty').value;
        if(!name) return alert("Enter Brand Name!");
        
        confetti();
        setTimeout(() => {
            const msg = encodeURIComponent(`I completed payment.\nBrand: ${name}\nPlots: ${qty}\nTotal: $${qty*5}`);
            window.open("https://wa.me/8801576940717?text=" + msg, "_blank");
        }, 1500);
    }
</script>

</body>
</html>
